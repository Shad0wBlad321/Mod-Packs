<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Combat Extended</li>
    </mods>
    <match Class="PatchOperationSequence">
      <operations>

        <!-- Hyperweave -->

        <li Class="PatchOperationAdd">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/statBases</xpath>
          <value>
            <Bulk>0.3</Bulk>
            <WornBulk>0.75</WornBulk>
          </value>
        </li>

        <li Class="PatchOperationReplace">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/statBases/StuffPower_Armor_Sharp</xpath>
          <value>
            <StuffPower_Armor_Sharp>0.25</StuffPower_Armor_Sharp>
          </value>
        </li>

        <li Class="PatchOperationReplace">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/statBases/StuffPower_Armor_Blunt</xpath>
          <value>
            <StuffPower_Armor_Blunt>0.1</StuffPower_Armor_Blunt>
          </value>
        </li>

        <li Class="PatchOperationReplace">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/statBases/StuffPower_Armor_Heat</xpath>
          <value>
            <StuffPower_Armor_Heat>0.2</StuffPower_Armor_Heat>
            <StuffPower_Armor_Electric>0.2</StuffPower_Armor_Electric>
          </value>
        </li>

        <li Class="PatchOperationAdd">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/stuffProps</xpath>
          <value>
            <statOffsets>
              <Mass>0.75</Mass>
            </statOffsets>
          </value>
        </li>

        <li Class="PatchOperationAdd">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/stuffProps/statFactors</xpath>
          <value>
            <Mass>1.2</Mass>
          </value>
        </li>

        <li Class="PatchOperationReplace">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/stuffProps/statFactors/Flammability</xpath>
          <value>
            <Flammability>0.1</Flammability>
          </value>
        </li>

        <li Class="PatchOperationConditional">
          <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/stuffProps/categories</xpath>
          <nomatch Class="PatchOperationAdd">
            <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/stuffProps</xpath>
            <value>
              <categories>
                <li>SoftArmor</li>
              </categories>
            </value>
          </nomatch>
          <match Class="PatchOperationAdd">
            <xpath>Defs/ThingDef[defName="Eccentric_Nanoweave"]/stuffProps/categories</xpath>
            <value>
              <li>SoftArmor</li>
            </value>
          </match>
        </li>

      </operations>
    </match>
  </Operation>
</Patch>

