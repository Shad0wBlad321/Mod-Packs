<?xml version="1.0" encoding="utf-8"?>

<Patch>
    <Operation Class="PatchOperationSequence">
        <operations>

            <!-- Helmet -->
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/statBases</xpath>
                <value>
                    <Bulk>6</Bulk>
                    <WornBulk>1</WornBulk>
                    <NightVisionEfficiency_Apparel>0.75</NightVisionEfficiency_Apparel>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/statBases/Flammability</xpath>
                <value>
                    <Flammability>0</Flammability>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/statBases/Mass</xpath>
                <value>
                    <Mass>6.6</Mass>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/statBases/MaxHitPoints</xpath>
                <value>
                    <MaxHitPoints>260</MaxHitPoints>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/statBases/ArmorRating_Sharp</xpath>
                <value>
                    <ArmorRating_Sharp>22</ArmorRating_Sharp>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/statBases/ArmorRating_Blunt</xpath>
                <value>
                    <ArmorRating_Blunt>50</ArmorRating_Blunt>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/equippedStatOffsets</xpath>
                <value>
                    <PsychicSensitivity>-0.3</PsychicSensitivity>
                    <AimingAccuracy>0.25</AimingAccuracy>                    
                    <SmokeSensitivity>-1</SmokeSensitivity>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/costList</xpath>
                <value>
                    <costList>
                        <ComponentSpacer>1</ComponentSpacer>
                        <Plasteel>110</Plasteel>
                        <DevilstrandCloth>25</DevilstrandCloth>
                    </costList>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]/apparel/layers</xpath>
                <value>
                    <li>OnHead</li>
                    <li>StrappedHead</li>
                </value>
            </li>

            <li Class="PatchOperationAddModExtension">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirHelmet"]</xpath>
                <value>
                    <li Class="CombatExtended.PartialArmorExt">
                        <stats>
                            <li>
                                <ArmorRating_Sharp>0.90</ArmorRating_Sharp>
                                <parts>
                                    <li>Eye</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.90</ArmorRating_Blunt>
                                <parts>
                                    <li>Eye</li>
                                </parts>
                            </li>
                        </stats>
                    </li>
                </value>
            </li>

            <!-- Armor -->
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/statBases</xpath>
                <value>
                    <Bulk>100</Bulk>
                    <WornBulk>15</WornBulk>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/statBases/MaxHitPoints</xpath>
                <value>
                    <MaxHitPoints>600</MaxHitPoints>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/statBases/Mass</xpath>
                <value>
                    <Mass>80</Mass>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/statBases/Flammability</xpath>
                <value>
                    <Flammability>0</Flammability>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/statBases/ArmorRating_Sharp</xpath>
                <value>
                    <ArmorRating_Sharp>28</ArmorRating_Sharp>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/statBases/ArmorRating_Blunt</xpath>
                <value>
                    <ArmorRating_Blunt>60</ArmorRating_Blunt>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/equippedStatOffsets</xpath>
                <value>
                    <CarryWeight>100</CarryWeight>
                    <CarryBulk>20</CarryBulk>
                    <ShootingAccuracyPawn>0.15</ShootingAccuracyPawn>                    
                    <MeleeDodgeChance>-0.15</MeleeDodgeChance>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/apparel/bodyPartGroups</xpath>
                <value>
                    <li>Hands</li>
                    <li>Feet</li>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]/costList</xpath>
                <value>
                    <costList>
                        <ComponentSpacer>6</ComponentSpacer>
                        <Plasteel>250</Plasteel>
                        <Uranium>80</Uranium>
                        <DevilstrandCloth>60</DevilstrandCloth>
                    </costList>
                </value>
            </li>

            <li Class="PatchOperationAddModExtension">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_MjolnirArmor"]</xpath>
                <value>
                    <li Class="CombatExtended.PartialArmorExt">
                        <stats>
                            <li>
                                <ArmorRating_Sharp>0.80</ArmorRating_Sharp>
                                <parts>
                                    <li>Hand</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.80</ArmorRating_Blunt>
                                <parts>
                                    <li>Hand</li>
                                </parts>
                            </li>
                        </stats>
                    </li>
                </value>
            </li>

        </operations>
    </Operation>
</Patch>