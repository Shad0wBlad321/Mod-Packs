<?xml version="1.0" encoding="utf-8"?>

<Patch>

    <Operation Class="PatchOperationSequence">
        <operations>

            <!-- Helmet -->
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases</xpath>
                <value>
                    <Bulk>5</Bulk>
                    <WornBulk>1</WornBulk>
                    <NightVisionEfficiency_Apparel>0.65</NightVisionEfficiency_Apparel>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/Flammability</xpath>
                <value>
                    <Flammability>0</Flammability>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/Mass</xpath>
                <value>
                    <Mass>4.8</Mass>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/MaxHitPoints</xpath>
                <value>
                    <MaxHitPoints>250</MaxHitPoints>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/ArmorRating_Sharp</xpath>
                <value>
                    <ArmorRating_Sharp>19</ArmorRating_Sharp>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/statBases/ArmorRating_Blunt</xpath>
                <value>
                    <ArmorRating_Blunt>43</ArmorRating_Blunt>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/equippedStatOffsets</xpath>
                <value>
                    <PsychicSensitivity>-0.2</PsychicSensitivity>
                    <AimingAccuracy>0.15</AimingAccuracy>                   
                    <SmokeSensitivity>-1</SmokeSensitivity>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/costList</xpath>
                <value>
                    <costList>
                        <ComponentSpacer>1</ComponentSpacer>
                        <Plasteel>85</Plasteel>
                        <DevilstrandCloth>22</DevilstrandCloth>
                    </costList>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]/apparel/layers</xpath>
                <value>
                    <li>OnHead</li>
                    <li>StrappedHead</li>
                </value>
            </li>

            <li Class="PatchOperationAddModExtension">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTHelmet"]</xpath>
                <value>
                    <li Class="CombatExtended.PartialArmorExt">
                        <stats>
                            <li>
                                <ArmorRating_Sharp>0.80</ArmorRating_Sharp>
                                <parts>
                                    <li>Eye</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.80</ArmorRating_Blunt>
                                <parts>
                                    <li>Eye</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Sharp>0.80</ArmorRating_Sharp>
                                <parts>
                                    <li>Nose</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.80</ArmorRating_Blunt>
                                <parts>
                                    <li>Nose</li>
                                </parts>
                            </li>
                        </stats>
                    </li>
                </value>
            </li>

            <!-- Armor -->
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases</xpath>
                <value>
                    <Bulk>100</Bulk>
                    <WornBulk>15</WornBulk>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/MaxHitPoints</xpath>
                <value>
                    <MaxHitPoints>550</MaxHitPoints>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/Flammability</xpath>
                <value>
                    <Flammability>0</Flammability>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/Mass</xpath>
                <value>
                    <Mass>50</Mass>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/ArmorRating_Sharp</xpath>
                <value>
                    <ArmorRating_Sharp>22</ArmorRating_Sharp>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/statBases/ArmorRating_Blunt</xpath>
                <value>
                    <ArmorRating_Blunt>50</ArmorRating_Blunt>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/equippedStatOffsets</xpath>
                <value>
                    <CarryWeight>90</CarryWeight>
                    <CarryBulk>20</CarryBulk>
                    <ShootingAccuracyPawn>0.15</ShootingAccuracyPawn>                    
                    <MeleeDodgeChance>-0.05</MeleeDodgeChance>
                </value>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/costList</xpath>
                <value>
                    <costList>
                        <ComponentSpacer>5</ComponentSpacer>
                        <Plasteel>215</Plasteel>
                        <Uranium>60</Uranium>
                        <DevilstrandCloth>55</DevilstrandCloth>
                    </costList>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]/apparel/bodyPartGroups</xpath>
                <value>
                    <li>Hands</li>
                    <li>Feet</li>
                </value>
            </li>

            <li Class="PatchOperationAddModExtension">
                <xpath>Defs/ThingDef[defName="HALO_UNSC_ODSTArmor"]</xpath>
                <value>
                    <li Class="CombatExtended.PartialArmorExt">
                        <stats>
                            <li>
                                <ArmorRating_Sharp>0.80</ArmorRating_Sharp>
                                <parts>
                                    <li>Neck</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.80</ArmorRating_Blunt>
                                <parts>
                                    <li>Neck</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Sharp>0.90</ArmorRating_Sharp>
                                <parts>
                                    <li>Arm</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.90</ArmorRating_Blunt>
                                <parts>
                                    <li>Arm</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Sharp>0.70</ArmorRating_Sharp>
                                <parts>
                                    <li>Hand</li>
                                </parts>
                            </li>
                            <li>
                                <ArmorRating_Blunt>0.70</ArmorRating_Blunt>
                                <parts>
                                    <li>Hand</li>
                                </parts>
                            </li>
                        </stats>
                    </li>
                </value>
            </li>

        </operations>
    </Operation>
</Patch>